<img src="https://github.com/monthly-cs/2024-01-network/assets/105256335/092bfbb2-28ef-4512-a8cd-09962967b707">

### 3.4 TCP와 UDP

---

각 계층에서 사용한 정보? 수신측의 동일한 계층에서 사용하기 위한 정보다.

TCP/UDP는 4계층이다.

4계층의 디캡슐레이션 과정에서 상위 계층의 목적지를 찾아갈 수 있는 것은 PORT이다.

잘 알려진 포트(Well Known)

- HTTP TCP 80
- HTTPS TCP 443
- SMTP TCP 25 …

공식적으로 사용하는, 포트번호는 1024 ~ 49151 / 동적, 사설 임시 포트 49152 ~ 65535

그러니까 최대 포트는 65535까지다.

**TCP**

---

TCP 프로토콜은 신뢰할 수 없는 public에서도 정보유실 없는 통신을 보장

패킷에 번호를 부여하고 잘 전송됐는지 응답한다.

104Page 패킷 순서, 응답 번호는 다시한 번 보는 것이 좋을 것 같다.

네트워크 상태가 안좋으면 패킷 유실 가능성이 올라간다.

패킷 크기를 정해야 하는데, 한 번에 데이터를 받을 수 있는 데이터 크기를 **윈도 사이즈**라고 한다.

이 윈도 사이즈를 조절하는 것을 **슬라이딩 윈도**라고 한다.

TCP 헤더에서 윈도 사이즈로 표현가능한 최대 크기 = 2^16

요즘은 네트워크 안정성도 올라가고 하드웨어도 올라가서, 윈도 사이즈를 늘려야 하는데 TCP 헤더는 변경 불가능 하니 헤더 사이즈를 늘리지 않고 뒤의 숫자를 무시하는 방법으로 윈도 사이즈를 증가시켜 통신한다.

TCP 데이터 유실이 발생하면 윈도 사이즈를 절반으로 떨어트리고, 천천히 늘린다.

**UDP**

---

TCP와 달리 4계층 특징이 거의 없다.

3 핸드 셰이크, 패킷 번호 등등.. TCP에서 안전한 통신을 위해 했던 것은 UDP와 관련이 없다.

UDP는 음성 데이터나 실시간 스트리밍과 같이 시간에 민감한 프로토콜이나 Application을 사용하는 경우나 사내 방송이나 응답 받기 어려운 환경에서 사용된다. 미디어 데이터가 시,청각에 응답속도가 민감하기 때문이다.

대표적으로 화상 회의, 이런 경우 데이터가 일부 유실되더라도 그냥 유실된 상태로 처리한다.

3 핸드셰이크는 없지만, 첫 데이터는 리소스 확보를 위해 인터럽트를 거는 용도로 사용되고 유실된다.

한편, 같은 동영상이나 화상이라도 단일 시청자를 위해서라면 TCP를 사용한다.
