### 6.3 방화벽

---

네트워크 중간에 위치해 해당 장비를 통과하는 트래픽을 사전에 주어진 조건에 맞춰 허용하거나 차단 하는 장비를 방화벽이라고 한다.

세션정보를 저장해 패킷의 인과관계를 확인한다.

### 6.4 계층 장비를 통과할 때의 유의점

---

세션 장비는 세션 테이블 정보를 활용해 application 성능을 최적화하고 보안을 강화하고 패킷을 포워딩할 수 있습니다.

**6.4.1 세션 테이블 유지, 세션 정보 동기화**

세션 테이블은 메모리에 저장되기 때문에 메모리 최적화를 위해 일정 시간만 저장된다.

또한, 악의적 공격에 대비하여 타임아웃값을 더 줄이기도 한다.

세션 장비의 타임아웃 값이 application의 타임 아웃 값과 다를 때 세션에 막혀 통신에 문제가 생기는 경우가 발생할 수 있다.

1. 세션 장비의 타임아웃과 application의 타임 아웃 값의 Synk
2. 세션 장비에서 타임아웃 발생시, 양 단말에 세션 종료 통보
3. 세션 상태를 체크하는 Heath Check와 같은 주기적인 패킷 발생 기능 작업( AWS ALB health check)

**6.4.2 비대칭 경로 문제**

---

패킷이 지나가는 경로가 2개 이상인 경우 인바운드 패킷과 아웃바운드 패킷의 경로가 같을 수도 있고 다를 수도 있다.

같은 것을 대칭 경로, 다른 것을 비대칭 경로라고 한다.

들어온 경로와 나가는 경로가 다른 경우 정상적 서비스가 어렵다.

비대칭 경로를 방화벽에서 처리할 수 있는 

- 첫 번째 방법은 세션 테이블 동기화
- 두 번째 방법은 세션 장비에서 다양한 방법으로 이를 보정하는 것

6.4.3 하나의 통신에 두 개 이상의 세션이 사용될 때의 고려사항
