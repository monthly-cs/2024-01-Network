<img src="https://github.com/monthly-cs/2024-01-network/assets/105256335/1ed208d5-bb48-4b13-9eb2-81b514f3005f">

라우터는 3계층에서 동작하는 여러 네트워크 장비의 대표격으로 경로를 지정해주는 장비다.

라우터로 들어오는 패킷의 목적지 IP 주소를 확인하고 자신이 가진 정보를 통해 패킷을

최적의 경로로 포워딩한다.

라우터는 L3 스위치라고도 불린다.

### 5.1 라우터의 동작 방식과 역할

---

라우터는 2계층 헤더 정보를 제거한 후 새로운 2계층 헤더를 만든다.

**5.1.1 경로 지정**

라우터의 가장 중요한 역할이다.

경로 정보를 모아 라우팅 테이블을 만들고 패킷이 라우터로 들어오면 도착지 IP 주소를 확인해 경로를 지정하고 포워딩한다.

**5.1.2 브로드캐스트 컨트롤**

라우터는 3계층에서 동작하고 분명한 목적지가 있을 때만 통신을 허락한다.

따라서, 라우터는 멀티캐스트 정보를 습득하지 않고 브로드 캐스트 패킷을 전달하지 않는다.

**5.1.3 프로토콜 변환**

라우터의 다른 역할로, 서로 다른 프로토콜로 구성된 네트워크를 연결하는 것이다.

현대 네트워크가 이더넷으로 수렴하여 이 역할은 많이 줄었다.

### 5.2 경로 지정 ㅡ 라우팅 / 스위치

---

라우터의 패킷 처리는 다음과 같다.

- 경로 정보를 얻어 경로 정보를 처리하는 역할
- 정리된 경로 정보를 기반으로 패킷을 포워딩하는 역할

**5.2.1 라우팅 동작과 라우팅 테이블**

라우터는 한 번에 최적의 경로를 안내하는 것이 아닌, 인접한 라우터까지만 안내하고 경로마다 최적의 경로를 다시 인접한 라우터가 찾아 다른 인접 라우터에 안내한다.

이것이 바로 홉 바이 홉 라우팅이라고 한다.

<aside>
💡 루프가 없는 3계층: TTL(Time To Live)

3계층의 IP 헤더에는 TTL이라는 필드가 있다. 이 필드는 패킷이 네트워크에 살아 있을 수 있는 시간(홉)을 제한한다.

TTL이 0이 되면 패킷은 네트워크 장비에서 버려진다.
TTL은 실제 초와 같은 시간이 아닌, 하나의 홉을 지날 때마다 TTL 값이 1씩 줄어든다.

</aside>

**5.2.2 라우팅(라우터가 경로 정보를 얻는 방법)**

1. 다이렉트 커넥티드
    
    
    IP 주소를 입력할 때 사용된 IP 주소와 서브넷 마스크로 해당 IP 주소가 속한 네트워크 주소 정보를 알 수 있는데, 라우터에서는 이 정보로 라우팅 테이블을 만든다.
    
2. 스태틱 라우팅
    
    
    관리자가 직접 다음 홉을 지정해 경로 정보를 입력하는 것을 말한다.
    
3. 다이나믹 라우팅

관리해야 할 포인트가 많아지면 스태틱으로는 불가능하고, 라우터끼리 자신이 알고 있는 경로 정보나 링크 상태 정보를 교환해 전체 네트워크 정보를 학습하여 정보교환으로 라우팅 하는 다이나믹 라우팅이 있다.

**5.2.3 스위칭(라우터가 경로를 지정하는 방법)**

최적 경로를 지정하는 것이 라우팅이다.

이 때 최적의 경로로 빠르게 라우터 외부로 포워딩하는 작업이 스위칭이다.

한 번 스위칭 작업을 수행한 정보는 캐시에 저장되고, 다음에 들어오는 패킷은 라우팅 테이블이 아닌 캐시를 먼저 확인한다.

**5.2.4 라우팅, 스위치 우선순위**

라우팅 테이블은 가장 좋은 경로 정보만을 모아놓은 핵심정보다.

라우팅 방법 중 우선순위가 가장 높은 것은 다이렉트 커넥티드다.

그 다음이 스태틱 라우팅

그 다음이 다이나믹 라우팅이다.
